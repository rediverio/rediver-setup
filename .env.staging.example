# =============================================================================
# Staging Environment Configuration
# =============================================================================
# Copy this file to .env.staging and update values
#
# Quick Start:
#   cp .env.staging.example .env.staging
#   # Edit .env.staging with your values
#   docker compose -f docker-compose.staging.yml --env-file .env.staging up -d
#
# With test data:
#   docker compose -f docker-compose.staging.yml --env-file .env.staging --profile seed up -d
# =============================================================================

# -----------------------------------------------------------------------------
# Ports (external)
# -----------------------------------------------------------------------------
# Only UI is exposed externally - API is internal only
UI_PORT=3000
# Database/Redis ports for debugging (optional, can be commented out)
DB_EXTERNAL_PORT=5432
REDIS_EXTERNAL_PORT=6379

# -----------------------------------------------------------------------------
# Database
# -----------------------------------------------------------------------------
DB_USER=rediver
DB_PASSWORD=change_this_password
DB_NAME=rediver
DB_SSLMODE=disable

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
# Leave empty for no password
REDIS_PASSWORD=

# -----------------------------------------------------------------------------
# Seed Data (Optional)
# -----------------------------------------------------------------------------
# Set to "true" to seed test data when using --profile seed
# Test credentials: admin@rediver.io / Password123
SEED_TEST_DATA=true

# -----------------------------------------------------------------------------
# Application
# -----------------------------------------------------------------------------
APP_DEBUG=false
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# Authentication (REQUIRED)
# -----------------------------------------------------------------------------
# Auth provider: "local" | "oidc" | "hybrid"
AUTH_PROVIDER=local

# CRITICAL: Generate a secure secret (min 64 characters)
# Generate with: openssl rand -base64 48
AUTH_JWT_SECRET=CHANGE_ME_generate_with_openssl_rand_base64_48

# Token durations
AUTH_ACCESS_TOKEN_DURATION=15m
AUTH_REFRESH_TOKEN_DURATION=168h
AUTH_SESSION_DURATION=720h

# Registration settings
AUTH_ALLOW_REGISTRATION=true
AUTH_REQUIRE_EMAIL_VERIFICATION=false

# -----------------------------------------------------------------------------
# URLs (update for your staging domain)
# -----------------------------------------------------------------------------
# =============================================================================
# IMPORTANT: Understanding NEXT_PUBLIC_* vs Server-only Variables
# =============================================================================
#
# NEXT_PUBLIC_* variables:
#   - Visible to browser (bundled into client-side JavaScript)
#   - Can be seen by anyone viewing your page source
#   - Safe for: App URLs, feature flags, cookie names, Sentry DSN
#   - NEVER put secrets here!
#
# Server-only variables (no NEXT_PUBLIC_ prefix):
#   - Hidden from browser (only available on Next.js server)
#   - Safe for: Backend URLs, JWT secrets, API keys, database passwords
#
# Request Flow (BFF Pattern):
#   Browser → http://localhost:3000/api/* → Next.js Server → http://api:8080
#             (NEXT_PUBLIC_APP_URL)                          (BACKEND_API_URL)
#
# See: rediver-ui/docs/ENVIRONMENT_VARIABLES.md for detailed documentation
# =============================================================================

# Public URL for the frontend (this is the ONLY externally accessible URL)
# Browser API calls go through Next.js proxy at this same URL
# For local: http://localhost:3000
# For staging server: http://your-server-ip:3000 or https://staging.example.com
NEXT_PUBLIC_APP_URL=http://localhost:3000

# CORS - Usually same as APP_URL since API is internal
# The backend only receives requests from Next.js server, not browser directly
CORS_ALLOWED_ORIGINS=http://localhost:3000

# -----------------------------------------------------------------------------
# Security (REQUIRED)
# -----------------------------------------------------------------------------
# Set to true if using HTTPS
SECURE_COOKIES=false

# CRITICAL: Generate a random secret (min 32 characters)
# Generate with: openssl rand -hex 32
CSRF_SECRET=CHANGE_ME_generate_with_openssl_rand_hex_32

# -----------------------------------------------------------------------------
# SMTP Email (Optional)
# -----------------------------------------------------------------------------
SMTP_ENABLED=false
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@rediver.io
SMTP_FROM_NAME=Rediver

# -----------------------------------------------------------------------------
# Sentry Error Tracking (Optional)
# -----------------------------------------------------------------------------
SENTRY_DSN=
